function countdown(t){var e=this;this.parentid=t,this.size=150,this.font="Open Sans",this.end="2000-01-01T00:00:00",this._endTime=null,this.onDraw=null,this.deg2rad=function(t){return Math.PI/180*t},this.drawGauge=function(t,s,n,a){t.getContext&&(cw=t.width,ch=t.height,ctx=t.getContext("2d"),ctx.clearRect(0,0,cw,ch),cx=cw/2,cy=ch/2,r=Math.min(cw,ch)/2.2,lw=r/15,n===s&&(n=s+360),a=!1,ctx.beginPath(),ctx.lineWidth=lw,ctx.globalAlpha=.2,ctx.strokeStyle="#FFFFFF",ctx.arc(cx,cy,r,e.deg2rad(s),e.deg2rad(s+360)),ctx.stroke(),ctx.beginPath(),ctx.lineWidth=lw,ctx.strokeStyle="#FFFFFF",ctx.globalAlpha=1,ctx.arc(cx,cy,r,e.deg2rad(s),e.deg2rad(n)),ctx.stroke())},this.textGauge=function(t,s,n){t.getContext&&(cw=t.width,ch=t.height,ctx=t.getContext("2d"),cx=cw/2,cy=ch/2,ctx.fillStyle="#FFFFFF",ctx.font=e.size/5+"px "+e.font,ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(s,cx,cy-e.size/10),ctx.font=e.size/10+"px "+e.font,ctx.fillText(n,cx,cy+e.size/10))},this.drawDays=function(t,s){eq=360*s/365-90,sq=-90,e.drawGauge(t,sq,eq,!1),e.textGauge(t,s,"Days")},this.drawHours=function(t,s){eq=360*s/24-90,sq=-90,e.drawGauge(t,sq,eq,!1),e.textGauge(t,s,"Hours")},this.drawMinutes=function(t,s){eq=360*s/60-90,sq=-90,e.drawGauge(t,sq,eq,!1),e.textGauge(t,s,"Minutes")},this.drawSeconds=function(t,s){eq=360*s/60-90,sq=-90,e.drawGauge(t,sq,eq,!1),e.textGauge(t,s,"Seconds")},this.calcDistance=function(t){var e={days:0,hours:0,mins:0,secs:0};return muldays=86400,mulhors=3600,mulmins=60,t>0&&(e.days=Math.floor(t/muldays),tdays=e.days*muldays,e.hours=Math.floor((t-tdays)/mulhors),thours=e.hours*mulhors,e.mins=Math.floor((t-tdays-thours)/mulmins),tmins=e.mins*mulmins,e.secs=Math.floor(t-tdays-thours-tmins)),e},this.redraw=function(){now=new Date,dist=Math.floor(e._endTime-now.getTime()/1e3),distance=e.calcDistance(dist);var t=document.getElementById(e.parentid+"_days"),s=document.getElementById(e.parentid+"_hours"),n=document.getElementById(e.parentid+"_minutes"),a=document.getElementById(e.parentid+"_seconds");e.drawDays(t,distance.days),e.drawHours(s,distance.hours),e.drawMinutes(n,distance.mins),e.drawSeconds(a,distance.secs),"function"==typeof e.onDraw&&e.onDraw(distance)},this.draw=function(){cdstr='<canvas id="'+e.parentid+'_days" class="countdown_canvas" width="'+e.size+'" height="'+e.size+'"></canvas>',cdstr+='<canvas id="'+e.parentid+'_hours" class="countdown_canvas" width="'+e.size+'" height="'+e.size+'"></canvas>',cdstr+='<canvas id="'+e.parentid+'_minutes" class="countdown_canvas" width="'+e.size+'" height="'+e.size+'"></canvas>',cdstr+='<canvas id="'+e.parentid+'_seconds" class="countdown_canvas" width="'+e.size+'" height="'+e.size+'"></canvas>',document.getElementById(e.parentid).innerHTML=cdstr;var t=new Date(e.end);e._endTime=t.getTime()/1e3;setInterval(e.redraw,1e3)}}