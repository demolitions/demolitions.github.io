
function countdown(a){this.parentid=a;this.size=150;this.font="Open Sans";this.end="2000-01-01T00:00:00";this._endTime=null;this.deg2rad=function(b){return(Math.PI/180)*b};this.drawGauge=function(c,b,d,e){if(c.getContext){cw=c.width;ch=c.height;ctx=c.getContext("2d");ctx.clearRect(0,0,cw,ch);cx=cw/2;cy=ch/2;r=Math.min(cw,ch)/2.2;lw=r/15;if(d===b){d=b+360}e=false;ctx.beginPath();ctx.lineWidth=lw;ctx.globalAlpha=0.2;ctx.strokeStyle="#FFFFFF";ctx.arc(cx,cy,r,this.deg2rad(b),this.deg2rad(b+360));ctx.stroke();ctx.beginPath();ctx.lineWidth=lw;ctx.strokeStyle="#FFFFFF";ctx.globalAlpha=1;ctx.arc(cx,cy,r,this.deg2rad(b),this.deg2rad(d));ctx.stroke()}};this.textGauge=function(b,c,d){if(b.getContext){cw=b.width;ch=b.height;ctx=b.getContext("2d");cx=cw/2;cy=ch/2;ctx.fillStyle="#FFFFFF";ctx.font=(this.size/5)+"px "+this.font;ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillText(c,cx,cy-(this.size/10));ctx.font=(this.size/10)+"px "+this.font;ctx.fillText(d,cx,cy+(this.size/10))}};this.drawDays=function(b,c){eq=((360*c)/365)-90;sq=-90;this.drawGauge(b,sq,eq,false);this.textGauge(b,c,"Days")};this.drawHours=function(b,c){eq=((360*c)/24)-90;sq=-90;this.drawGauge(b,sq,eq,false);this.textGauge(b,c,"Hours")};this.drawMinutes=function(b,c){eq=((360*c)/60)-90;sq=-90;this.drawGauge(b,sq,eq,false);this.textGauge(b,c,"Minutes")};this.drawSeconds=function(b,c){eq=((360*c)/60)-90;sq=-90;this.drawGauge(b,sq,eq,false);this.textGauge(b,c,"Seconds")};this.calcDistance=function(b){var c={days:0,hours:0,mins:0,secs:0};muldays=(60*60*24);mulhors=(60*60);mulmins=60;if(b>0){c.days=Math.floor(b/muldays);tdays=c.days*muldays;c.hours=Math.floor((b-tdays)/mulhors);thours=c.hours*mulhors;c.mins=Math.floor((b-tdays-thours)/mulmins);tmins=c.mins*mulmins;c.secs=Math.floor(b-tdays-thours-tmins)}return c};this.redraw=function(){now=new Date();dist=Math.floor(this._endTime-(now.getTime()/1000));distance=this.calcDistance(dist);var e=document.getElementById(this.parentid+"_days");var c=document.getElementById(this.parentid+"_hours");var d=document.getElementById(this.parentid+"_minutes");var b=document.getElementById(this.parentid+"_seconds");this.drawDays(e,distance.days);this.drawHours(c,distance.hours);this.drawMinutes(d,distance.mins);this.drawSeconds(b,distance.secs)};this.draw=function(){cdstr='<canvas id="'+this.parentid+'_days" class="countdown_canvas" width="'+this.size+'" height="'+this.size+'"></canvas>';cdstr+='<canvas id="'+this.parentid+'_hours" class="countdown_canvas" width="'+this.size+'" height="'+this.size+'"></canvas>';cdstr+='<canvas id="'+this.parentid+'_minutes" class="countdown_canvas" width="'+this.size+'" height="'+this.size+'"></canvas>';cdstr+='<canvas id="'+this.parentid+'_seconds" class="countdown_canvas" width="'+this.size+'" height="'+this.size+'"></canvas>';document.getElementById(this.parentid).innerHTML=cdstr;var c=new Date(this.end);this._endTime=(c.getTime()/1000);var b=setInterval(function(d){d.redraw()},1000,this)}};